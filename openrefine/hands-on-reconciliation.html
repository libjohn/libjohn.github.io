<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Cleaning Data with OpenRefine</title>
  <meta name="description" content="This lab workbook contains hands-on material supplementing the OpenRefine workshops">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Cleaning Data with OpenRefine" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This lab workbook contains hands-on material supplementing the OpenRefine workshops" />
  <meta name="github-repo" content="libjohn/openrefine" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cleaning Data with OpenRefine" />
  
  <meta name="twitter:description" content="This lab workbook contains hands-on material supplementing the OpenRefine workshops" />
  

<meta name="author" content="John Little">


<meta name="date" content="2018-04-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="hands-on-dates.html">
<link rel="next" href="hands-on-web-scraping.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html"><i class="fa fa-check"></i>Workshop Outline</a><ul>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#workshop-structure"><i class="fa fa-check"></i>Workshop Structure</a><ul>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#testimonial"><i class="fa fa-check"></i>Testimonial</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#workshop-philosophy"><i class="fa fa-check"></i>Workshop Philosophy</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#workshop-video"><i class="fa fa-check"></i>Workshop Video</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#for-best-results"><i class="fa fa-check"></i>For best results</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#comparative-advantage"><i class="fa fa-check"></i>Comparative Advantage</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#characteristics"><i class="fa fa-check"></i>Characteristics</a><ul>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#general"><i class="fa fa-check"></i>General</a></li>
<li class="chapter" data-level="" data-path="workshop-outline.html"><a href="workshop-outline.html#video"><i class="fa fa-check"></i>Video</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html"><i class="fa fa-check"></i>Demonstration</a><ul>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#load-data"><i class="fa fa-check"></i>Load Data</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#navigating-the-project"><i class="fa fa-check"></i>Navigating the “Project”</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#rows-vs.records"><i class="fa fa-check"></i>Rows vs. Records</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#web-scrape-api"><i class="fa fa-check"></i>Web Scrape &amp; API</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#parsing-data"><i class="fa fa-check"></i>Parsing Data</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#split"><i class="fa fa-check"></i>Split</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#concatenate"><i class="fa fa-check"></i>Concatenate</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#find-replace"><i class="fa fa-check"></i>Find &amp; Replace</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#facet-by-blank"><i class="fa fa-check"></i>Facet by Blank</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#text-filter"><i class="fa fa-check"></i>Text filter</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#custom-facet"><i class="fa fa-check"></i>Custom Facet</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>1</b> Hands-on: basic transformations</a><ul>
<li class="chapter" data-level="1.1" data-path="start.html"><a href="start.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting Started</a></li>
<li class="chapter" data-level="1.2" data-path="start.html"><a href="start.html#shutting-down-openrefine"><i class="fa fa-check"></i><b>1.2</b> Shutting Down OpenRefine</a></li>
<li class="chapter" data-level="1.3" data-path="start.html"><a href="start.html#facets-cluster"><i class="fa fa-check"></i><b>1.3</b> Facets &amp; Cluster</a><ul>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#facet-cluster"><i class="fa fa-check"></i>Facet &amp; Cluster</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#compound-facets"><i class="fa fa-check"></i>Compound Facets</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#mass-editing"><i class="fa fa-check"></i>Mass Editing</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="start.html"><a href="start.html#split-data-in-cells"><i class="fa fa-check"></i><b>1.4</b> Split data in cells</a></li>
<li class="chapter" data-level="1.5" data-path="start.html"><a href="start.html#concatenate-cells-together"><i class="fa fa-check"></i><b>1.5</b> Concatenate cells together</a></li>
<li class="chapter" data-level="1.6" data-path="start.html"><a href="start.html#search-replace-plus-more"><i class="fa fa-check"></i><b>1.6</b> Search &amp; Replace, Plus More</a><ul>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#convert-data-types"><i class="fa fa-check"></i>Convert Data Types</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#remove-whitespace"><i class="fa fa-check"></i>Remove Whitespace</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#search-replace"><i class="fa fa-check"></i>Search &amp; Replace</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="start.html"><a href="start.html#web-scraping"><i class="fa fa-check"></i><b>1.7</b> Web Scraping</a><ul>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#subset"><i class="fa fa-check"></i>Select a subset</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#api"><i class="fa fa-check"></i>API</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#parse"><i class="fa fa-check"></i>Parse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="grel.html"><a href="grel.html"><i class="fa fa-check"></i><b>2</b> Hands-on: GREL</a><ul>
<li class="chapter" data-level="2.1" data-path="grel.html"><a href="grel.html#custom-facets"><i class="fa fa-check"></i><b>2.1</b> Custom Facets</a><ul>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#download-new-data-then-create-a-new-openrefine-project"><i class="fa fa-check"></i>Download new Data then Create a new OpenRefine Project:</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="grel.html"><a href="grel.html#grel-to-transform-and-normalize"><i class="fa fa-check"></i><b>2.2</b> GREL to Transform and Normalize</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#regular-expression"><i class="fa fa-check"></i>Regular Expression</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#filter-text"><i class="fa fa-check"></i>Filter Text</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#facet"><i class="fa fa-check"></i>Facet</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#cluster"><i class="fa fa-check"></i>Cluster</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#mass-editing-via-facets"><i class="fa fa-check"></i>Mass Editing via Facets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html"><i class="fa fa-check"></i><b>3</b> Hands-on: reshape</a><ul>
<li class="chapter" data-level="3.1" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html#ingest-excel-data"><i class="fa fa-check"></i><b>3.1</b> Ingest Excel data</a></li>
<li class="chapter" data-level="3.2" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html#facets-1"><i class="fa fa-check"></i><b>3.2</b> Facets</a></li>
<li class="chapter" data-level="3.3" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html#text-filter-1"><i class="fa fa-check"></i><b>3.3</b> Text Filter</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="hands-on-dates.html"><a href="hands-on-dates.html"><i class="fa fa-check"></i><b>4</b> Hands-on: dates</a><ul>
<li class="chapter" data-level="4.1" data-path="hands-on-dates.html"><a href="hands-on-dates.html#dates"><i class="fa fa-check"></i><b>4.1</b> Dates</a></li>
<li class="chapter" data-level="4.2" data-path="hands-on-dates.html"><a href="hands-on-dates.html#logic"><i class="fa fa-check"></i><b>4.2</b> Logic</a></li>
<li class="chapter" data-level="4.3" data-path="hands-on-dates.html"><a href="hands-on-dates.html#reproducible"><i class="fa fa-check"></i><b>4.3</b> Reproducible</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="hands-on-reconciliation.html"><a href="hands-on-reconciliation.html"><i class="fa fa-check"></i><b>5</b> Hands-on: Reconciliation</a><ul>
<li class="chapter" data-level="5.1" data-path="hands-on-reconciliation.html"><a href="hands-on-reconciliation.html#reconciliation"><i class="fa fa-check"></i><b>5.1</b> Reconciliation</a></li>
<li class="chapter" data-level="5.2" data-path="hands-on-reconciliation.html"><a href="hands-on-reconciliation.html#reconciliation-resources"><i class="fa fa-check"></i><b>5.2</b> Reconciliation Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html"><i class="fa fa-check"></i><b>6</b> Hands-on: Web Scraping</a><ul>
<li class="chapter" data-level="6.1" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#api-1"><i class="fa fa-check"></i><b>6.1</b> API</a></li>
<li class="chapter" data-level="6.2" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#parse-1"><i class="fa fa-check"></i><b>6.2</b> Parse</a></li>
<li class="chapter" data-level="6.3" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#keys"><i class="fa fa-check"></i><b>6.3</b> Keys</a></li>
<li class="chapter" data-level="6.4" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#exercise-2"><i class="fa fa-check"></i><b>6.4</b> Exercise 2</a><ul>
<li class="chapter" data-level="" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#parse-2"><i class="fa fa-check"></i>Parse</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span><ul>
<li class="chapter" data-level="" data-path=""><a href="#additional-documentation"><i class="fa fa-check"></i>Additional Documentation</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cleaning Data with OpenRefine</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hands-on-reconciliation" class="section level1">
<h1><span class="header-section-number">5</span> Hands-on: Reconciliation</h1>
<p>OpenRefine’s <em><a href="https://github.com/OpenRefine/OpenRefine/wiki/Reconciliation">Reconciliation</a></em> service is used to semi-automate the process of matching data in OpenRefine fields with more authoritative data in external sources. This reconciliation function is called <strong>semi</strong>-automated because the end-user is given the opportunity to interactively approve or select which data are modified by choosing from a pick-list of results. This process can be used to improve and standardize individual data fields or columns of data inside of OpenRefine. Or it can be used to extend the data in OpenRefine.</p>
<blockquote>
<p>For example: Match each name in a list of authors against an external authoritative list of authors. Augment the authoritative entry of each author’s name; Add an example book title for each author.</p>
</blockquote>
<div id="reconciliation" class="section level2">
<h2><span class="header-section-number">5.1</span> Reconciliation</h2>
<p><strong>Goal</strong>: Import <a href="https://github.com/libjohn/openrefine/blob/master/data/AA-authors-you-should-read.csv">new author data</a> into a new project, Use the WikiData and VIAF reconciliation services to gather authoritative versions of African American author names and an example of each author’s work, plus their placed of birth and death.</p>
<div class="video">
<iframe width="560" height="315" src="https://www.youtube.com/embed/ugZaMCsvg90" frameborder="0" allowfullscreen>
</iframe>
</div>
<ol style="list-style-type: decimal">
<li><p>Make a New Project, Import Author Data</p>
<ul>
<li><span class="or-menu">Create Project &gt; Web Addresses (URLs) &gt;</span> <code>https://raw.githubusercontent.com/libjohn/openrefine/master/data/AA-authors-you-should-read.csv</code></li>
<li><span class="or-menu">Next &gt;&gt;</span><br />
</li>
<li>You many want to give your project a pretty title</li>
<li><span class="or-menu"> Create Project &gt;&gt; </span></li>
</ul></li>
<li><p><span class="or-menu"> author &gt; Reconcile &gt; Start reconciling… </span></p>
<ol style="list-style-type: lower-alpha">
<li><p>Change the <strong>Show:</strong> to <strong>25</strong> so you can see all 11 records.</p></li>
<li><p>First time / One time …</p>
<ol style="list-style-type: lower-roman">
<li><span class="or-menu"> Add Standard Service… </span></li>
<li>In the <strong>Enter the service’s URL:</strong> textbox, enter: <code>http://refine.codefork.com/reconcile/viaf</code><a href="#fn12" class="footnoteRef" id="fnref12"><sup>12</sup></a></li>
<li>Name = “Reconciled Authors”</li>
<li>click <strong>VIAF</strong></li>
<li>Under <em>Reconcile each cell to an entity of one of these types:</em>, choose <strong>Work</strong></li>
<li>Click, <span class="or-menu">Start Reconciling</span></li>
<li><span class="or-menu">authors &gt; Reconcile &gt; Actions &gt; Match each cell to its best candidate</span></li>
<li><p><span class="or-menu">authors &gt; Edit column &gt; Add column based on this column… </span></p>
<ol style="list-style-type: lower-alpha">
<li>New column name = <strong>major works</strong></li>
<li>Expression = <code>cell.recon.candidates[0].name</code> <a href="#fn13" class="footnoteRef" id="fnref13"><sup>13</sup></a></li>
<li><span class="or-menu"> OK </span></li>
</ol></li>
</ol></li>
<li><p>The rest of the time…</p>
<ol style="list-style-type: lower-roman">
<li><span class="or-menu"> author &gt; Reconcile &gt; Start reconciling… </span></li>
<li>Under <strong>Services</strong>, click <strong>Wikidata Reconciliation for OpenRefine (en)</strong></li>
<li>Under <em>Reconcile each cell to an entity of one of these types:</em>, choose, <strong>human</strong></li>
<li>Click, <span class="or-menu">Start Reconciling</span></li>
<li>In the left-hand sidebar, <span class="or-menu">Remove All</span> facets</li>
<li><p>By clicking the approriate single checkbox in each cell of the <em>authors</em> column, <strong>manually</strong> slect the most appropriate author for our topic. (Our topic is African American Authors everyone should read). Not every cell has an author for which you must make a selection. Cells 2, 10 need your intervention.</p>
<ol style="list-style-type: lower-alpha">
<li>In Cell 2, James Baldwin, select the first option which a match of “(100)”</li>
<li>In cell 10, Click on the first name, then the second name. Do you see an African-American writer? Choose him by clicking the corresponding single check-mark</li>
</ol></li>
</ol></li>
</ol></li>
<li><p>Add more metadata from Wiki Data (only works for Wikidata as of this writing)</p>
<ol style="list-style-type: lower-alpha">
<li><span class="or-menu">authors &gt; Edit column &gt; Add columns from reconciled values…</span></li>
<li>Under <strong>Suggested Properties</strong>, click <em>place of birth</em> and <em>place of death</em></li>
<li><span class="or-menu">OK</span></li>
</ol></li>
<li><p>Copy the author and dates information from the ‘Richard Wright’ cell under the “major works” column; <strong>Edit</strong> the Richard Write cell under the “authors” column ; paste in the more complete information: <code>Wright, Richard, 1908-1960</code></p></li>
<li><p>Add authoritative author data from VIAF</p>
<ol style="list-style-type: lower-alpha">
<li><span class="or-menu"> author &gt; Reconcile &gt; Start reconciling… </span></li>
<li>Under <em>Reconcile each cell to an entity of one of these types:</em>, choose <strong>Person</strong></li>
<li>Click, <span class="or-menu">Start Reconciling</span></li>
<li><span class="or-menu">authors &gt; Reconcile &gt; Actions &gt; Match each cell to its best candidate</span></li>
<li>By useing the <em>Choose new match</em> option, fix row 2.</li>
</ol></li>
<li><p>Transform the “major works” column by splitting the column at the pipe: `|’</p></li>
<li><p>Can Export as CSV (Excel, etc.) with Reconciled info.</p></li>
</ol>
</div>
<div id="reconciliation-resources" class="section level2">
<h2><span class="header-section-number">5.2</span> Reconciliation Resources</h2>
<ul>
<li>YouTube: <a href="https://www.youtube.com/watch?v=q8ffvdeyuNQ">Reconcilliation in OpenRefine: Part 1</a> by Owen Stephens</li>
<li>YouTube: <a href="https://www.youtube.com/watch?v=0tQPmfb6IFk">Reconcilliation in OpenRefine part 2</a></li>
<li><a href="https://github.com/OpenRefine/OpenRefine/wiki/Reconcilable-Data-Sources">Reconciliation Data Sources</a></li>
<li>For low use needs: <a href="http://refine.codefork.com/">VIAF / ORCID / Open Library</a></li>
<li>For more advanced needs: <a href="https://github.com/codeforkjeff/conciliator#conciliator">conciliator</a></li>
<li><a href="https://github.com/OpenRefine/OpenRefine/wiki/Reconciliation">OpenRefine documentation on Reconciliation</a></li>
<li><a href="https://github.com/OpenRefine/OpenRefine/wiki/Reconciliation-Service-API">OpenRefine technical documentation on reconciliation API</a></li>
<li>Transform Recon Candidates to cell data: <a href="http://liwong.blogspot.com/2017/07/tutorial-on-objects-and-cellrecon-object.html">e.g. cell.recon.candidates[0].id</a></li>
</ul>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="12">
<li id="fn12"><p><a href="http://refine.codefork.com/" class="uri">http://refine.codefork.com/</a><a href="hands-on-reconciliation.html#fnref12">↩</a></p></li>
<li id="fn13"><p><a href="http://liwong.blogspot.com/2017/07/tutorial-on-objects-and-cellrecon-object.html" class="uri">http://liwong.blogspot.com/2017/07/tutorial-on-objects-and-cellrecon-object.html</a><a href="hands-on-reconciliation.html#fnref13">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hands-on-dates.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="hands-on-web-scraping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
