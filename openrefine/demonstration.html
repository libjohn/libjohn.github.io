<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Cleaning Data with OpenRefine</title>
  <meta name="description" content="This lab workbook contains hands-on material supplementing the OpenRefine workshops">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Cleaning Data with OpenRefine" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This lab workbook contains hands-on material supplementing the OpenRefine workshops" />
  <meta name="github-repo" content="libjohn/openrefine" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cleaning Data with OpenRefine" />
  
  <meta name="twitter:description" content="This lab workbook contains hands-on material supplementing the OpenRefine workshops" />
  

<meta name="author" content="John Little">


<meta name="date" content="2018-06-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="preamble.html">
<link rel="next" href="start.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html"><i class="fa fa-check"></i>Preamble</a><ul>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#testimonial"><i class="fa fa-check"></i>Testimonial</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#workshop-philosophy"><i class="fa fa-check"></i>Workshop Philosophy</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#on-data-cleaning"><i class="fa fa-check"></i>On Data Cleaning</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#workshop-video"><i class="fa fa-check"></i>Workshop Video</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#for-best-results"><i class="fa fa-check"></i>For Best Results</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#comparative-advantage"><i class="fa fa-check"></i>Comparative Advantage</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#characteristics"><i class="fa fa-check"></i>Characteristics</a><ul>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#general"><i class="fa fa-check"></i>General</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#video"><i class="fa fa-check"></i>Video</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#reproducible"><i class="fa fa-check"></i>Reproducible</a></li>
<li class="chapter" data-level="" data-path="preamble.html"><a href="preamble.html#documentation"><i class="fa fa-check"></i>Documentation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html"><i class="fa fa-check"></i>Demonstration</a><ul>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#import-data"><i class="fa fa-check"></i>Import Data</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#navigating-the-project"><i class="fa fa-check"></i>Navigating the “Project”</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#facets"><i class="fa fa-check"></i>Facets</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#rows-vs.records"><i class="fa fa-check"></i>Rows vs. Records</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#web-scrape-api"><i class="fa fa-check"></i>Web Scrape &amp; API</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#parsing-data"><i class="fa fa-check"></i>Parsing Data</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#split"><i class="fa fa-check"></i>Split</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#concatenate"><i class="fa fa-check"></i>Concatenate</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#find-replace"><i class="fa fa-check"></i>Find &amp; Replace</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#facet-by-blank"><i class="fa fa-check"></i>Facet by Blank</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#text-filter"><i class="fa fa-check"></i>Text filter</a></li>
<li class="chapter" data-level="" data-path="demonstration.html"><a href="demonstration.html#custom-facet"><i class="fa fa-check"></i>Custom Facet</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="start.html"><a href="start.html"><i class="fa fa-check"></i><b>1</b> Hands-on: basic transformations</a><ul>
<li class="chapter" data-level="1.1" data-path="start.html"><a href="start.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting Started</a></li>
<li class="chapter" data-level="1.2" data-path="start.html"><a href="start.html#shutting-down-openrefine"><i class="fa fa-check"></i><b>1.2</b> Shutting Down OpenRefine</a></li>
<li class="chapter" data-level="1.3" data-path="start.html"><a href="start.html#facets-cluster"><i class="fa fa-check"></i><b>1.3</b> Facets &amp; Cluster</a><ul>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#facet-cluster"><i class="fa fa-check"></i>Facet &amp; Cluster</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#compound-facets"><i class="fa fa-check"></i>Compound Facets</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#mass-editing"><i class="fa fa-check"></i>Mass Editing</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="start.html"><a href="start.html#split-data-in-cells"><i class="fa fa-check"></i><b>1.4</b> Split data in cells</a></li>
<li class="chapter" data-level="1.5" data-path="start.html"><a href="start.html#concatenate-cells-together"><i class="fa fa-check"></i><b>1.5</b> Concatenate cells together</a></li>
<li class="chapter" data-level="1.6" data-path="start.html"><a href="start.html#search-replace-plus-more"><i class="fa fa-check"></i><b>1.6</b> Search &amp; Replace, Plus More</a><ul>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#convert-data-types"><i class="fa fa-check"></i>Convert Data Types</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#remove-whitespace"><i class="fa fa-check"></i>Remove Whitespace</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#search-replace"><i class="fa fa-check"></i>Search &amp; Replace</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="start.html"><a href="start.html#web-scraping"><i class="fa fa-check"></i><b>1.7</b> Web Scraping</a><ul>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#subset"><i class="fa fa-check"></i>Select a subset</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#api"><i class="fa fa-check"></i>API</a></li>
<li class="chapter" data-level="" data-path="start.html"><a href="start.html#parse"><i class="fa fa-check"></i>Parse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="grel.html"><a href="grel.html"><i class="fa fa-check"></i><b>2</b> Hands-on: GREL</a><ul>
<li class="chapter" data-level="2.1" data-path="grel.html"><a href="grel.html#custom-facets"><i class="fa fa-check"></i><b>2.1</b> Custom Facets</a><ul>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#download-new-data-then-create-a-new-openrefine-project"><i class="fa fa-check"></i>Download new Data then Create a new OpenRefine Project:</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="grel.html"><a href="grel.html#grel-to-transform-and-normalize"><i class="fa fa-check"></i><b>2.2</b> GREL to Transform and Normalize</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#regular-expression"><i class="fa fa-check"></i>Regular Expression</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#filter-text"><i class="fa fa-check"></i>Filter Text</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#facet"><i class="fa fa-check"></i>Facet</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#cluster"><i class="fa fa-check"></i>Cluster</a></li>
<li class="chapter" data-level="" data-path="grel.html"><a href="grel.html#mass-editing-via-facets"><i class="fa fa-check"></i>Mass Editing via Facets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html"><i class="fa fa-check"></i><b>3</b> Hands-on: reshape</a><ul>
<li class="chapter" data-level="3.1" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html#ingest-excel-data"><i class="fa fa-check"></i><b>3.1</b> Ingest Excel data</a></li>
<li class="chapter" data-level="3.2" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html#facets-1"><i class="fa fa-check"></i><b>3.2</b> Facets</a></li>
<li class="chapter" data-level="3.3" data-path="hands-on-reshape.html"><a href="hands-on-reshape.html#text-filter-1"><i class="fa fa-check"></i><b>3.3</b> Text Filter</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="hands-on-dates.html"><a href="hands-on-dates.html"><i class="fa fa-check"></i><b>4</b> Hands-on: dates</a><ul>
<li class="chapter" data-level="4.1" data-path="hands-on-dates.html"><a href="hands-on-dates.html#dates"><i class="fa fa-check"></i><b>4.1</b> Dates</a></li>
<li class="chapter" data-level="4.2" data-path="hands-on-dates.html"><a href="hands-on-dates.html#logic"><i class="fa fa-check"></i><b>4.2</b> Logic</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="hands-on-reconciliation.html"><a href="hands-on-reconciliation.html"><i class="fa fa-check"></i><b>5</b> Hands-on: Reconciliation</a><ul>
<li class="chapter" data-level="5.1" data-path="hands-on-reconciliation.html"><a href="hands-on-reconciliation.html#reconciliation"><i class="fa fa-check"></i><b>5.1</b> Reconciliation</a></li>
<li class="chapter" data-level="5.2" data-path="hands-on-reconciliation.html"><a href="hands-on-reconciliation.html#reconciliation-resources"><i class="fa fa-check"></i><b>5.2</b> Reconciliation Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html"><i class="fa fa-check"></i><b>6</b> Hands-on: Web Scraping</a><ul>
<li class="chapter" data-level="6.1" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#api-1"><i class="fa fa-check"></i><b>6.1</b> API</a></li>
<li class="chapter" data-level="6.2" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#parse-1"><i class="fa fa-check"></i><b>6.2</b> Parse</a></li>
<li class="chapter" data-level="6.3" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#keys"><i class="fa fa-check"></i><b>6.3</b> Keys</a></li>
<li class="chapter" data-level="6.4" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#exercise-2"><i class="fa fa-check"></i><b>6.4</b> Exercise 2</a><ul>
<li class="chapter" data-level="" data-path="hands-on-web-scraping.html"><a href="hands-on-web-scraping.html#parse-2"><i class="fa fa-check"></i>Parse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="hands-on-html-parsing.html"><a href="hands-on-html-parsing.html"><i class="fa fa-check"></i><b>7</b> Hands-on: HTML Parsing</a><ul>
<li class="chapter" data-level="7.1" data-path="hands-on-html-parsing.html"><a href="hands-on-html-parsing.html#fetch"><i class="fa fa-check"></i><b>7.1</b> Fetch</a></li>
<li class="chapter" data-level="7.2" data-path="hands-on-html-parsing.html"><a href="hands-on-html-parsing.html#parse-3"><i class="fa fa-check"></i><b>7.2</b> Parse</a></li>
<li class="chapter" data-level="7.3" data-path="hands-on-html-parsing.html"><a href="hands-on-html-parsing.html#inspect-your-work"><i class="fa fa-check"></i><b>7.3</b> Inspect your work…</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cleaning Data with OpenRefine</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="demonstration" class="section level1 unnumbered">
<h1>Demonstration</h1>
<div id="import-data" class="section level2 unnumbered">
<h2>Import Data</h2>
<ol style="list-style-type: decimal">
<li><span class="or-menu">Create Project &gt; Web Addresses (URLs) &gt; </span> <code>https://raw.githubusercontent.com/libjohn/openrefine/master/data/bicycle-subset-phm-collection.tsv</code></li>
<li>Uncheck - “Quotation marks are used to enclose” (bottom-right)</li>
<li>Project Name to “bicycle categories”</li>
</ol>
</div>
<div id="navigating-the-project" class="section level2 unnumbered">
<h2>Navigating the “Project”</h2>
<ul>
<li>Notice there are 72 rows<br />
</li>
<li>Notice there are two views: rows and records<br />
</li>
<li>The “records” view is for advanced manipulation</li>
<li>You can
<ul>
<li>“Show” 5-50 rows at a time</li>
<li>Navigate screens “&lt; Previous” &amp; “next &gt;”</li>
</ul></li>
</ul>
</div>
<div id="facets" class="section level2 unnumbered">
<h2>Facets</h2>
<ul>
<li><span class="or-menu">Categories &gt; Facet &gt; Text facet</span>
<ol style="list-style-type: decimal">
<li>Notice mashup of “pipe delimited” text facets</li>
<li><em>Why are there Pipe delimiters?</em></li>
<li><em>How many Category choices exist?</em></li>
<li>Switch between the “name” and “count” sorting options.</li>
</ol></li>
<li>Export a CSV file</li>
<li><span class="or-menu">Export &gt; Comma-separated value</span></li>
<li><em>How many rows will export: 4, 16, 72, 180?</em></li>
</ul>
</div>
<div id="rows-vs.records" class="section level2 unnumbered">
<h2>Rows vs. Records</h2>
<ul>
<li><p>Row v Records <a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p></li>
<li><span class="or-menu">Categories &gt; edit cells &gt; split multi-valued cells &gt;</span> separator = <code>|</code>
<ol style="list-style-type: decimal">
<li><em>Now how many Category choices exist?</em></li>
<li>Click <strong>records</strong> to switch to the records view</li>
<li>Click <strong>count</strong> What is the most popular Category term?</li>
<li>Click <strong>name</strong> Limit to the “Juvenilia” facet; How many matching records?</li>
</ol></li>
</ul>
</div>
<div id="web-scrape-api" class="section level2 unnumbered">
<h2>Web Scrape &amp; API</h2>
<p><em>Scraping data from an API or Webpage</em></p>
<ul>
<li><span class="or-menu">new_link &gt; Edit column &gt; Add column by fetching URLs…</span></li>
<li>New column name = <code>Web Data</code></li>
<li><em>Notice</em> Throttle delay
<ol style="list-style-type: decimal">
<li><code>2000</code> milliseconds is good. Less than 2 seconds and you <em>might</em> get booted, blocked, cast out!</li>
</ol></li>
<li>Click OK and wait</li>
<li>When done, you’ve got all the source data for each page associated with the link in the “Persistent Link” column</li>
</ul>
</div>
<div id="parsing-data" class="section level2 unnumbered">
<h2>Parsing Data</h2>
<p>A Brief Introduction</p>
<ul>
<li>Look fora big block of gobbly text in the “Web Data” column. That is HTML formatted data<br />
</li>
<li>Typically, after fetching data, you’ll need to parse it<br />
</li>
<li>You can use GREL <a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> to parse data and isolate a specific bit of desired information
<ul>
<li><strong>GREL</strong> is the advanced power of OpenRefine. <a href="grel.html#grel">We will come back to this</a></li>
</ul></li>
<li>For example, you can transform the data in the retrieved cells with a <a href="https://github.com/libjohn/guides/blob/master/regex/regex.Rmd">regular expression</a> to gather only the title of each object<br />
</li>
<li><span class="or-menu">Web Data &gt; Edit column &gt; Add column based on this column…</span>
<ol style="list-style-type: decimal">
<li>New Column Name = <code>Web Page Title</code></li>
<li>Expression = <code>value.parseHtml().select(&quot;h1.object-page__title&quot;)[0].htmlText()</code></li>
</ol></li>
</ul>
</div>
<div id="split" class="section level2 unnumbered">
<h2>Split</h2>
<ul>
<li><p>remove faceting: click <span class="or-menu">Remove All</span> in the facet sidebar</p></li>
<li><span class="or-menu"> Production Date &gt; Edit column &gt; Split into several columns…</span>
<ol style="list-style-type: decimal">
<li>Seperator = <code>-</code> (i.e. “space dash space”)</li>
</ol></li>
</ul>
</div>
<div id="concatenate" class="section level2 unnumbered">
<h2>Concatenate</h2>
<ul>
<li><span class="or-menu">Height &gt; Edit column &gt; Add column based on this column</span></li>
<li>GREL Expression = <code>value + &quot; x &quot; + cells[&quot;Width&quot;].value</code></li>
</ul>
</div>
<div id="find-replace" class="section level2 unnumbered">
<h2>Find &amp; Replace</h2>
<ul>
<li><span class="or-menu">Dimension &gt; Edit cells &gt; Transform</span></li>
<li>GREL Expression = <code>value.replace(&quot;mm&quot;,&quot;&quot;)</code></li>
</ul>
</div>
<div id="facet-by-blank" class="section level2 unnumbered">
<h2>Facet by Blank</h2>
<ul>
<li><span class="or-menu">Dimension &gt; Facet &gt; Customized facet &gt; facet by blank</span></li>
</ul>
</div>
<div id="text-filter" class="section level2 unnumbered">
<h2>Text filter</h2>
<ul>
<li>Clear all facets</li>
<li>Title = <code>bmx</code></li>
</ul>
</div>
<div id="custom-facet" class="section level2 unnumbered">
<h2>Custom Facet</h2>
<ul>
<li>Production date</li>
<li><span class="or-menu">Facet &gt; custom text facet</span></li>
<li><code>value.match(/(\d\d).*/)[0]</code></li>
</ul>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>Row v Records <a href="http://kb.refinepro.com/2012/03/difference-between-record-and-row.html">Explained</a><a href="demonstration.html#fnref2">↩</a></p></li>
<li id="fn3"><p><a href="https://github.com/OpenRefine/OpenRefine/wiki/General-Refine-Expression-Language">General Refine Expression Language</a><a href="demonstration.html#fnref3">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="preamble.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="start.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
